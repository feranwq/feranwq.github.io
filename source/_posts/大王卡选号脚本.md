title: 王卡选号脚本
date: 2017-07-26 18:59:14
tags: 
mp3: 
cover: http://wx3.sinaimg.cn/large/77b6881dly1fhxmhyp3bmj20wn0zkn24.jpg
---
> 在申请大王卡的界面选号很麻烦,效率很低,抓了下包发现联通的接口很简单,限制也很少,就写了个脚本来自动筛选想要的号


```
#! /usr/bin/env python3

import urllib.request
import re
import time


proxy_support = urllib.request.ProxyHandler({'sock5': '127.0.0.1:80'})
opener = urllib.request.build_opener(proxy_support)
urllib.request.install_opener(opener)
wantNum = []


def queryMoreNums():
    try:
        moreNums = urllib.request.urlopen("http://num.10010.com/NumApp/NumberCenter/qryNum?callback=jsonp_queryMoreNums&provinceCode=11&cityCode=110&monthFeeLimit=0&groupKey=85236889&searchCategory=3&net=01&amounts=200&codeTypeCode=&searchValue=&qryType=02&goodsNet=4&_=1501050170").read().decode("utf8")
        return moreNums
    except:
        time.sleep(20)
        queryMoreNums()
		
		
while True:
    moreNums = queryMoreNums()
    moreNumsResult = re.compile('\d{11}.*?')
    moreNumsResultOK = re.findall(moreNumsResult, moreNums)
	
    wantNumResult1 = re.compile(r'\d([0-9])(?!\1)([0-9])\2(?!\2)([0-9])\3(?!\3)([0-9])\4(\d|)')#*AABBCC*
    wantNumResult2 = re.compile(r'\d(\d{3})\1(\d|)')  # *ABCABC*
    wantNumResult3 = re.compile(r'\d(\d{4})\1(\d|)')  # *ABCDABCD*
    wantNumResult4 = re.compile(r'\d(1234|2345|3456|4567|5678|6789)(\d|)')  # *1234*
    wantNumResult5 = re.compile(r'\d(9876|8765|7654|6543|5432|4321)(\d|)')  # *4321*
    wantNumResult6 = re.compile(r'\d(19920927|1992927|92927|920927)(\d|)')
    wantNumResult7 = re.compile(r'\d{4}([0-9])\1{2}(\d|)')  # *111*
	
    wantNum += (i for i in moreNumsResultOK if wantNumResult1.search(i) or wantNumResult2.search(i) or wantNumResult3.search(i) or wantNumResult4.search(i) or wantNumResult5.search(i) or wantNumResult6.search(i) or wantNumResult7.search(i))
    print(set(wantNum))
    time.sleep(10)
    
#执行结果    {'17610938106', '17610678962', '18500343215', '18612987694', '18511754327', '18510654362', '18510342342', '18501987699', '18510654362'}
```


> 跑了一会就命中了不少了,还是比较效率的.当然联通还是有一些限制的,频率太高或者时间太长可能被BAN IP,有空把自动代理完善一下

> 验证一下,可用


![image](http://wx1.sinaimg.cn/large/77b6881dly1fhxisz5koyj21401z4gry.jpg)

